

## Kmom06

Phpmetrics kände jag var ett väldigt användbart och lättöverskådligt analysverktyg. I synnerhet visualiseringen av klasserna i mån av komplexitet och maintainability index på landningssidan gav en snabb och tydlig överblick över var i ens kodbas de största potentiella problemen kan finnas. Även om jag inte hade full förståelse över vad några av indikatorerna eller mätvärdena innebar kände jag att många av mätpunkterna gav god information. För mitt eget projekt var komplexitet, både på klassnivå och metodnivå, samt couplings de mätvärdden som stod ut som mest intressanta. Jag kunde genom dessa värden identifiera möjligheter för förbättring i koden, t.ex. genom refaktorering av en metod med cyklomatisk komplexitet på över 10 som skötte lite för många saker (i detta fall olika post-förfrågningar) och därför skulle kunnas brytas upp i mindre metoder.

Scrutinizer gav för min del väldigt liknande information till PhpMetrics med den enda skillnaden att jag kunde titta närmare på metoder och kod. Jag uppskattade även att verktyget identifierade mer granulära problem och potentiella buggar i koden, t.ex. oanvända variabler. När det kommer till integration hade jag inga problem med den initiala integreringen, men stötte på problem med konfigurationsfilen, där inga filer exkluderades. Jag löste detta genom att skriva om raderna för exkludering av filer enligt ett annat format. Därtill stötte jag på problem där inspektioner avslutades med fel, till synes utan tydliga problem. Detta löstes genom att köra om inspektionen. Sist men inte minst hade jag problemet att scrutinizer inte visade information om cohesion och couplings, varför jag fick förlita mig på phpmetrics för detta. Badges är ett trevligt sätt att visualisera övergripande kodkvalitet, men är ingenting jag ser att jag skulle använda utanför scrutinizer-sidan. 

Vid min första scrutinizer-inspektion fick jag en kodkvalitet på 6.14 och täckning på 26%. Detta berodde dock på att scrutinizer inspekterade samtliga filer i projektet, inklusive filer i vendor-mappen. När jag skrivit om konfigurationsfilen och körde analysen igen fick jag istället ett betyg på 9.84, ett fullgott betyg som jag dock lyckades lyfta till 10, samt kodtäckning på 26%. Kodtäckningen berodde på avsaknad av enhetstester för controllerklasser samt autogenererade klasser. För den kod som vi berörde i kmom04 hade jag 100% täckning, vilket jag återigen var nöjd med.

När det kommer till min egen syn på kodkvalitet har jag en något splittrad syn. Å ena sidan ser jag och förstår vikten av att hålla olika koncept för kodkvalitet i åtanke, så som komplexitet, cohesion och coupling. Det är alltid viktigt att se över sin kod för att försäkra att klasser gör vad de ska och bara det de ska, att endast introducera beroenden som är növändiga och för att eliminera överflödiga beslutspunker, dels för att förenkla testning, förbättra överskådlighet och för att minska risken för buggar, men också för att optimera ett program. Det handlar helt enkelt om att strömlinjeforma din kod för bättre överskådlighet, lättare testning, bättre prestanda och mindre antal buggar. Å andra sidan har jag vid mer än ett tillfälle sett resultat från en linter och undrat vad problemet egentligen är, i synnerhet när det kommer till saker som långa kodrader. Jag förstår vikten av att hålla sig till en kodstil och att kontrollera sin kod med linters, men jag håller helt enkelt inte om allt dessa verktyg säger och jag har ibland ansett att de skapat rörigare kod. Detta handlar i mångt och mycket om en smaksak när det kommer till kodstil och jag är fullt medveten om att man kan konfigurera dylika verktyg för att endast kontrollera stilproblem du själv anser vara relevanta. När det kommer till kodkvalitet ser jag själv inte att jag skulle påverkas av badges som visuella verktyg för att uppmuntra förbättring av kod. Jag är själv mer intresserad av mätvärdena i fråga, vare sig de presenteras visuellt eller som text. Det sagt tror jag absolut att badges kan vara användbart för att uppmuntra andra personer eller kanske i en organisation, där badges används för validering av koden, dvs. att den är "good to go".

I detta kursmoment rör mitt TIL självklart analysverktygen phpmetrics och scrutinizer. Jag har själv aldrig använt mig av dessa verktyg eller liknande verktyg som visar statistik över kodkvalitet, utan har endast använt mig av de verktyg som introducerats tidigare under kursen och som pekat ut specifika problem i koden. Dessa verktyg är ett bra verktyg för att få en överblick över projektet som helhet och för att identifiera områden där koden kan förbättras genom refaktorering.
